@(message: String)

@main("Timeline") {

    @fileUpload()
    @newEventForm()

    <div>
        <h3 id="flashing"></h3>
        <div id="timeline"></div>
    </div>

    <script type="text/javascript">

        var timeline;
        $(function() {
            require(['timeline/timelineService','forms/loadEventsForm'], function(timelineService, loadEventsForm) {

                var onNewEventLoadedSuccess = function(data) {
                    var container = $("#timeline")[0];

                    var options = {};
                    timeline = timelineService.createTimeline('timeline', data, options);

                    $("#flashing" ).text("DONE!");
                };

                console.log('in INDEX')
                console.log(timelineService)
                console.log(loadEventsForm);
                loadEventsForm.attachForm(onNewEventLoadedSuccess);
            });
        });

    </script>
}
