(function(){define("timeline/timelineService",["require","jquery","alerts/alertsService","timeline/selectionService","forms/newEventForm","timeline/searchService","../switcher","../timePointer"],function(e){var t=e("jquery"),n=e("alerts/alertsService"),r=e("timeline/selectionService"),i=e("forms/newEventForm"),s=e("timeline/searchService"),o=e("../switcher"),u=e("../timePointer"),a=null,f=0,l=function(e,s,o){var l=t("#"+e)[0];return a==null?(a=new links.Timeline(l),a.draw(s,o),u.init(a)):(a.addItems(s),a.redraw()),f+=s.length,links.events.addListener(a,"delete",p),n.publishInfoAlert("Timeline created!"),links.events.addListener(a,"select",function(){r.selectCallback(a)}),i.updateGroups(a.groups),a},c=function(e){o.switchView(t("#timelinesWrapper")),e.id=f++,a.addItem(e),n.publishSuccessAlert("Event created: "+e.content+" on "+e.start)},h=function(){return a},p=function(){var e=a.getItem(a.getSelection()[0].row);n.publishInfoAlert("Event deleted: "+e.content)},d=function(e,t){(a==null||e==null||e.length>0)&&console.error("Cannot add on selection handler - no timeline or data provided"),links.events.addListener(a,e,t)},v=function(e){return!m(e)},m=function(e){return a==null?!1:a.groups.some(function(t){if(t.content===e)return!0})},g=function(e){return s.search(e,a.items)};return{createTimeline:l,addNewEvent:c,getTimeline:h,addEventHandler:d,canCreateGroup:v,search:g}}),define("assets/javascripts/timeline/timelineService",function(){}),requirejs.config({baseUrl:".",paths:{jquery:"assets/javascripts/libs/jquery-1.9.0.min",lodash:"assets/javascripts/libs/lodash"}}),requirejs(["assets/javascripts/timeline/timelineService"]),define("assets/javascripts/main",function(){})})();